# 4.1 Dashboard Layout Implementation Plan

## Overview
Create the main dashboard layout with navigation, user profile section, and job statistics overview. This serves as the foundation for all user dashboard functionality.

## Prerequisites
- Authentication system is implemented and working
- User can successfully login/logout
- Protected route middleware is available
- Database has jobs table with user_id foreign key

## Technical Requirements

### Route Protection
- `/dashboard` must be a protected route requiring authentication
- Redirect unauthenticated users to `/auth/login?return=/dashboard`
- Use existing `authServer.requireAuth()` for server-side protection

### Layout Structure
```
Dashboard Layout
├── Navigation Header
│   ├── Logo/Brand
│   ├── Dashboard Title
│   └── User Menu (Profile, Logout)
├── Sidebar Navigation (Desktop) / Tab Navigation (Mobile)
│   ├── Overview Tab (Default Active)
│   ├── My Jobs Tab
│   └── Post New Job Tab
└── Main Content Area
    ├── Welcome Section
    ├── Statistics Cards
    └── Quick Actions
```

## Implementation Steps

### Step 1: Create Dashboard Page Route
**File**: `src/app/dashboard/page.tsx`
- Create server component with authentication check
- Fetch user data and job statistics
- Pass data to client dashboard layout component

### Step 2: Dashboard Layout Component
**File**: `src/components/dashboard/dashboard-layout.tsx`
- Create main layout wrapper component
- Implement responsive navigation (sidebar on desktop, tabs on mobile)
- Add user profile section with avatar placeholder and user info
- Include logout functionality

### Step 3: Navigation Components
**File**: `src/components/dashboard/dashboard-nav.tsx`
- Create navigation component with active state management
- Use Next.js Link components for client-side navigation
- Implement mobile-responsive tab navigation
- Add icons for each navigation item

### Step 4: Statistics Overview
**File**: `src/components/dashboard/dashboard-stats.tsx`
- Create statistics cards showing:
  - Total jobs posted
  - Active jobs
  - Total views (placeholder for future implementation)
  - Jobs posted this month
- Use loading skeletons while data is being fetched
- Implement responsive grid layout

### Step 5: Welcome Section
**File**: `src/components/dashboard/welcome-section.tsx`
- Create personalized welcome message with user's name
- Add quick action buttons (Post New Job, View All Jobs)
- Include helpful tips for new users with no jobs

### Step 6: Database Statistics Functions
**File**: `src/lib/database/dashboard.ts`
- Create functions to fetch user dashboard statistics:
  - `getUserJobStats(userId: string)`
  - `getRecentActivity(userId: string)` (for future use)
- Implement proper error handling and type safety

## UI/UX Specifications

### Design System
- Use consistent spacing with Tailwind CSS (`p-4`, `p-6`, `p-8`)
- Implement card-based design with subtle shadows
- Use existing color scheme (blue primary, gray neutrals)
- Ensure responsive design works on mobile, tablet, desktop

### Navigation States
- Active state: blue background with white text
- Hover state: light gray background
- Focus state: blue ring for accessibility
- Mobile: sticky tab navigation at bottom

### Statistics Cards
- Clean white background with subtle border
- Icon + number + label layout
- Subtle hover effects
- Loading state with skeleton animation

## Data Requirements

### User Statistics Shape
```typescript
interface UserStats {
  totalJobs: number
  activeJobs: number
  totalViews: number // placeholder
  jobsThisMonth: number
}
```

### User Profile Data
```typescript
interface UserProfile {
  id: string
  email: string
  full_name?: string
  avatar_url?: string
  created_at: string
}
```

## Success Criteria
- [ ] Dashboard route is properly protected
- [ ] Navigation works on desktop and mobile
- [ ] User can see their job statistics
- [ ] Welcome section shows personalized content
- [ ] Logout functionality works correctly
- [ ] Responsive design looks good on all screen sizes
- [ ] Loading states are implemented
- [ ] Proper TypeScript typing throughout

## Testing Considerations
- Test with users who have 0, 1, and multiple jobs
- Test responsive layout on different screen sizes
- Test authentication redirects
- Test navigation between dashboard tabs
- Verify statistics calculations are correct

## Future Enhancements
- Real-time job view statistics
- Activity feed showing recent actions
- Job performance analytics
- Export job data functionality