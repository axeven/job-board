# 3.1 Public Job Listing Implementation Plan

## Overview
Create a public job listing page at `/jobs` that displays all available job postings with server-side rendering for optimal performance and SEO.

## Technical Requirements

### 1. Database Integration
- **File**: `src/lib/database/jobs.ts`
- **Function**: `getAllJobs()`
  ```typescript
  export async function getAllJobs(): Promise<Job[]> {
    const { data, error } = await supabase
      .from('jobs')
      .select('*')
      .order('created_at', { ascending: false })
    
    if (error) throw error
    return data || []
  }
  ```

### 2. Page Component
- **File**: `src/app/jobs/page.tsx`
- **Features**:
  - Server-side data fetching using async component
  - Error boundary for graceful failure handling
  - SEO metadata configuration
  - Responsive grid layout

```typescript
// Key implementation structure
export const metadata: Metadata = {
  title: 'Jobs - Job Board',
  description: 'Browse available job opportunities'
}

export default async function JobsPage() {
  try {
    const jobs = await getAllJobs()
    return <JobListingGrid jobs={jobs} />
  } catch (error) {
    return <ErrorState message="Failed to load jobs" />
  }
}
```

### 3. Job Card Component
- **File**: `src/components/jobs/job-card.tsx`
- **Props Interface**:
  ```typescript
  interface JobCardProps {
    job: {
      id: string
      title: string
      company: string
      location: string
      job_type: 'Full-Time' | 'Part-Time' | 'Contract'
      created_at: string
      description: string // truncated for card display
    }
  }
  ```
- **Features**:
  - Truncated description with "Read more" link
  - Job type badge with color coding
  - Responsive card layout
  - Hover effects and transitions
  - Link to job detail page

### 4. Job Listing Grid
- **File**: `src/components/jobs/job-listing-grid.tsx`
- **Features**:
  - Responsive CSS Grid (1-3 columns based on screen size)
  - Empty state handling
  - Loading skeleton support
  - Proper TypeScript typing

### 5. Search Functionality (Bonus)
- **File**: `src/components/jobs/job-search.tsx`
- **Implementation**:
  - Client-side search input
  - Real-time filtering of job list
  - Search by title, company, or description
  - URL parameter integration for shareable searches

## UI/UX Specifications

### Layout Structure
```
/jobs page layout:
┌─────────────────────────────────────┐
│ Header (Company name, location)     │
│ Search Bar (bonus feature)          │
├─────────────────────────────────────┤
│ Job Cards Grid                      │
│ ┌──────┐ ┌──────┐ ┌──────┐         │
│ │ Job  │ │ Job  │ │ Job  │         │
│ │ Card │ │ Card │ │ Card │         │
│ └──────┘ └──────┘ └──────┘         │
│ ┌──────┐ ┌──────┐ ┌──────┐         │
│ │ Job  │ │ Job  │ │ Job  │         │
│ │ Card │ │ Card │ │ Card │         │
│ └──────┘ └──────┘ └──────┘         │
└─────────────────────────────────────┘
```

### Job Card Design
- **Dimensions**: Flexible height, min-height: 200px
- **Contents**:
  - Job title (h3, bold, 18px)
  - Company name (14px, secondary color)
  - Location (12px, gray)
  - Job type badge (pill shape, colored)
  - Description excerpt (3 lines max)
  - Posted date (relative, e.g., "2 days ago")

### Responsive Breakpoints
- **Mobile (< 768px)**: 1 column
- **Tablet (768px - 1024px)**: 2 columns
- **Desktop (> 1024px)**: 3 columns

## Error Handling

### 1. Database Errors
- Catch and log database connection issues
- Display user-friendly error message
- Provide retry mechanism

### 2. Empty State
- **Component**: `src/components/jobs/empty-jobs-state.tsx`
- Display when no jobs are available
- Include call-to-action for employers to post jobs

### 3. Loading States
- Server component renders immediately with data
- Consider skeleton loading for future client-side features

## Performance Considerations

### 1. Data Fetching
- Use server-side rendering for initial page load
- Consider pagination for large job lists (implement if > 100 jobs)
- Database indexing on `created_at` for sorting

### 2. Image Optimization
- Use Next.js Image component for company logos (future enhancement)
- Implement lazy loading for off-screen job cards

### 3. Caching Strategy
- Implement ISR (Incremental Static Regeneration) if job updates are infrequent
- Cache database queries at application level

## Testing Strategy

### 1. Unit Tests
- Test job card component rendering
- Test empty state handling
- Test error boundary behavior

### 2. Integration Tests
- Test database query functions
- Test page rendering with mock data
- Test responsive layout behavior

### 3. E2E Tests
- Navigate to /jobs page
- Verify job listings display correctly
- Test search functionality (if implemented)
- Test navigation to job detail pages

## Accessibility Requirements

### 1. Semantic HTML
- Use proper heading hierarchy (h1 → h3)
- Implement landmark roles for navigation
- Use list semantics for job grid

### 2. Keyboard Navigation
- All interactive elements must be keyboard accessible
- Proper tab order through job cards
- Focus indicators for all links

### 3. Screen Reader Support
- Alt text for any images
- ARIA labels for interactive elements
- Descriptive link text for job details

## Implementation Steps

### Phase 1: Basic Structure
1. Create database query function
2. Set up basic page component
3. Create job card component
4. Implement responsive grid layout

### Phase 2: Enhancement
1. Add error handling and empty states
2. Implement search functionality
3. Add loading states and skeletons
4. Performance optimizations

### Phase 3: Polish
1. Accessibility improvements
2. Testing implementation
3. SEO optimization
4. Animation and transitions

## Dependencies
- Supabase client for database queries
- Next.js 15 App Router
- Tailwind CSS for styling
- TypeScript for type safety
- React for component structure

## Estimated Timeline
- **Phase 1**: 1-2 days
- **Phase 2**: 1-2 days  
- **Phase 3**: 1 day

**Total**: 3-5 days