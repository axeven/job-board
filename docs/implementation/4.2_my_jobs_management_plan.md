# 4.2 My Jobs Management Implementation Plan

## Overview
Implement the "My Jobs" section where users can view, manage, and get quick insights into all their posted jobs. This includes listing jobs with status indicators, quick actions, and proper empty states.

## Prerequisites
- Dashboard layout (4.1) is implemented
- Job creation system is working
- Database has jobs table with proper relationships
- User authentication is functional

## Technical Requirements

### Data Fetching
- Server-side rendering for initial job list
- Implement pagination for users with many jobs
- Add sorting options (newest first, oldest first, by status)
- Cache job data appropriately

### Job Status System
- Implement job status field in database (active/draft/closed)
- Add status indicators with appropriate colors
- Allow status changes directly from the list

## Implementation Steps

### Step 1: Database Schema Updates
**File**: `supabase/migrations/add_job_status.sql`
- Add `status` enum column to jobs table: `('active', 'draft', 'closed')`
- Set default status to 'active'
- Create index on status for performance

### Step 2: Update Job Database Functions
**File**: `src/lib/database/jobs.ts`
- Extend `getUserJobs()` to include filtering by status
- Add `updateJobStatus()` function
- Add `getJobsWithPagination()` for large datasets
- Update TypeScript types to include status

### Step 3: My Jobs Page Component
**File**: `src/app/dashboard/my-jobs/page.tsx`
- Create server component to fetch user's jobs
- Implement search and filter functionality
- Handle pagination server-side
- Pass data to client components

### Step 4: Job List Component
**File**: `src/components/dashboard/my-jobs-list.tsx`
- Create responsive job list with card layout
- Implement job status badges
- Add quick action buttons (edit, delete, view, toggle status)
- Include job metadata (views, applications, date posted)

### Step 5: Job Card Component
**File**: `src/components/dashboard/job-card.tsx`
- Reusable card component for dashboard job display
- Different layout from public job cards (more admin-focused)
- Include quick stats and action buttons
- Show truncated description with "View Details" link

### Step 6: Empty State Component
**File**: `src/components/dashboard/empty-jobs-state.tsx`
- Friendly empty state for users with no jobs
- Call-to-action to post their first job
- Include helpful tips about effective job posting
- Illustration or icon to make it visually appealing

### Step 7: Job Actions Menu
**File**: `src/components/dashboard/job-actions-menu.tsx`
- Dropdown menu with job actions
- Actions: Edit, Duplicate, Change Status, Delete, View Public Page
- Implement confirmation dialogs for destructive actions
- Handle loading states during actions

### Step 8: Job Filters Component
**File**: `src/components/dashboard/job-filters.tsx`
- Filter by status (All, Active, Draft, Closed)
- Sort options (Newest, Oldest, Most Views)
- Search by title or company
- Clear filters functionality

## UI/UX Specifications

### Layout Structure
```
My Jobs Page
├── Page Header
│   ├── Title "My Jobs"
│   ├── Job Count
│   └── "Post New Job" Button
├── Filters Section
│   ├── Status Filter Tabs
│   ├── Sort Dropdown
│   └── Search Input
└── Jobs List
    ├── Job Cards (Grid on Desktop, Stack on Mobile)
    └── Pagination (if needed)
```

### Job Card Design
- Clean card layout with job title and company prominent
- Status badge in top-right corner
- Key metrics: Posted date, views (placeholder), applications (future)
- Action buttons in footer
- Hover effects for interactivity

### Status Colors
- **Active**: Green (`bg-green-100 text-green-800`)
- **Draft**: Yellow (`bg-yellow-100 text-yellow-800`)
- **Closed**: Gray (`bg-gray-100 text-gray-800`)

### Responsive Design
- Desktop: 2-3 column grid
- Tablet: 2 column grid
- Mobile: Single column stack

## Data Models

### Extended Job Type
```typescript
interface DashboardJob extends Job {
  status: 'active' | 'draft' | 'closed'
  views?: number // placeholder for future
  applications?: number // placeholder for future
}
```

### Job Filter State
```typescript
interface JobFilters {
  status: 'all' | 'active' | 'draft' | 'closed'
  sort: 'newest' | 'oldest' | 'most_views'
  search: string
}
```

### Pagination State
```typescript
interface JobsPagination {
  page: number
  limit: number
  total: number
  hasMore: boolean
}
```

## Quick Actions Implementation

### 1. Edit Job
- Navigate to `/dashboard/jobs/[id]/edit`
- Pre-populate form with existing data
- Handle unsaved changes warning

### 2. Toggle Status
- Quick toggle between active/closed
- Confirmation dialog for status changes
- Optimistic UI updates

### 3. Duplicate Job
- Create copy with "(Copy)" appended to title
- Set status to 'draft'
- Navigate to edit page for the duplicated job

### 4. Delete Job
- Confirmation dialog with job title
- Soft delete vs hard delete consideration
- Remove from list with smooth animation

### 5. View Public Page
- Open job detail page in new tab
- Show how the job appears to public users

## Success Criteria
- [ ] Users can see all their posted jobs
- [ ] Jobs display with correct status indicators
- [ ] Filter and search functionality works
- [ ] Quick actions perform expected operations
- [ ] Empty state shows for users with no jobs
- [ ] Responsive design works on all devices
- [ ] Loading states during actions
- [ ] Error handling for failed operations
- [ ] Pagination works for users with many jobs

## Performance Considerations
- Implement virtual scrolling for users with 100+ jobs
- Cache job list data with appropriate revalidation
- Optimize database queries with proper indexes
- Use optimistic updates for better UX

## Error Handling
- Network errors during job fetching
- Failed status updates
- Database connection issues
- Proper user feedback for all error states

## Testing Strategy
- Test with users having 0, 1, few, and many jobs
- Test all filter combinations
- Test quick actions with various job states
- Mobile responsiveness testing
- Error scenarios (network failures, etc.)

## Future Enhancements
- Bulk job actions (select multiple, bulk delete/status change)
- Job templates for quick posting
- Job analytics and performance insights
- Export jobs to different formats
- Job scheduling (post at specific time)